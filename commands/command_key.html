

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Key Command &mdash; cloudmesh_client 3.1.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="cloudmesh_client 3.1.2 documentation" href="../index.html"/>
        <link rel="up" title="User Manual" href="index.html"/>
        <link rel="next" title="List Command" href="command_list.html"/>
        <link rel="prev" title="Cloud Command" href="command_cloud.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> cloudmesh_client
          

          
          </a>

          
            
            
              <div class="version">
                3.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../prefix.html">Prefix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Short Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_card.html">Reference Card</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts.html">Example Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comet.html">Comet Virtual Cluster</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manuals</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#shell-commands">Shell Commands</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#cloud-commands">Cloud Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="command_register.html">Register Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_cloud.html">Cloud Command</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Key Command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-key-to-the-database">Adding a key to the database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="command_list.html">List Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_secgroup.html">SecGroup Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_vm.html">VM Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_nova.html">Nova Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_flavor.html">Flavor Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_image.html">Image Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_network.html">Network Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_nova.html">Nova Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_sync.html">Sync Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_limits.html">Limits Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_quota.html">Quota Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_usage.html">Usage Command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#hpc-commands">HPC Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#comet-commands">Comet Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#proposed-commands">Proposed Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../man/man.html">Commands</a></li>
</ul>
<p class="caption"><span class="caption-text">Teaching</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../exercises.html">Exercises</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking.html">Hacking</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>
<p class="caption"><span class="caption-text">Future and Old</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code/cloudmesh_client.html">cloudmesh_client package</a></li>
</ul>
<p class="caption"><span class="caption-text">Todo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../todo.html">ToDos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hackathon.html">Using python 2 and 3 for development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hackathon.html#python-guidelines">Python Guidelines</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">cloudmesh_client</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">User Manual</a> &raquo;</li>
      
    <li>Key Command</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/commands/command_key.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="key-command">
<h1>Key Command<a class="headerlink" href="#key-command" title="Permalink to this headline">¶</a></h1>
<p>In clouds and distributed environments security keys are used for
authentication. We like to be able to register specific keys with
clouds or vms and easily use them. To do so we upload them into a key
registry in which each key is uniquely named. We use these named keys
when we start up virtual machines or log into remote machines.</p>
<p>The manual page of the key command can be found at: <a class="reference external" href="../man/man.html#key">key</a></p>
<div class="section" id="adding-a-key-to-the-database">
<h2>Adding a key to the database<a class="headerlink" href="#adding-a-key-to-the-database" title="Permalink to this headline">¶</a></h2>
<p>To add a key to the key registry from a file we use the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key add --name=demokey /home/albert/key_expt/id_rsa.pub
Key demokey successfully added to the database
info. OK.
</pre></div>
</div>
<div class="section" id="list-keys">
<h3>List Keys<a class="headerlink" href="#list-keys" title="Permalink to this headline">¶</a></h3>
<p>To list the keys in the registry you can use the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key list
  +---------+--------------------+--------------------------------------------+-------------------------------------------------+--------+
  | name    | comment            | uri                                        | fingerprint                                     | source |
  +---------+--------------------+--------------------------------------------+-------------------------------------------------+--------+
  | demokey | albert@Zweistein | file:///home/key_expt/id_rsa.pub             | 4e:fc:e8:03:4e:c7:8e:ca:30:1a:54:43:8d:24:90:39 | ssh    |
  +---------+--------------------+--------------------------------------------+-------------------------------------------------+--------+
  info. OK.
</pre></div>
</div>
<p>The key command takes a number of additional options. Instead of using
the cloudmesh registry, keys can also be read from git hub with the option:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key list --source=git
+------+----------+-----------------------------+-------------------------------------------------+--------+
| name | comment  | uri                         | fingerprint                                     | source |
+------+----------+-----------------------------+-------------------------------------------------+--------+
|      | github-0 | https://github.com/TBD.keys | 6e:95:48:8d:af:20:75:2a:52:6b:c5:29:d3:71:0a:8b |        |
|      | github-1 | https://github.com/TBD.keys | 8a:4f:fe:80:be:e5:ec:c8:c1:1d:e9:74:28:41:c5:a3 |        |
+------+----------+-----------------------------+-------------------------------------------------+--------+
info. OK.
</pre></div>
</div>
<p>To change the output format you can specify it with the &#8211;format
option:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key list --source=git --format=json
{
    &quot;github-0&quot;: {
        &quot;comment&quot;: &quot;github-0&quot;,
        &quot;string&quot;: &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC/4dvq0KG++Tieu4vhqL4WptgsSUIq+vqLi4PiR6N+UBwEcYWzX33O0gyHsQIJ4dgZRPzTf/kxGPFGtHCrKd0aAUL4uFWFZwuMmJqOvAp+6UDOan/XU9O59Ou0y2vnIxv7+QYb2AHJpHrxjWJ2TjBH7LlTN+jqZBpKUxWQpy4ooyJaN87vpJMbyOEk1LVNpBZHGexF4WRPI6XQUf4PshBRHgqJ9cmiEZUhFWQgeCiyknm8Zx7rGrRhIDnXRw/FOzCyQhnjSS4nJddWzfjNfv9Y0KzRz1KFWUQT9eLaO/j3Q3TleG0zzbZxCBgHv5Jhjm6lmUBcKD0pKU2uhwlD+Ki9&quot;,
        &quot;uri&quot;: &quot;https://github.com/TBD.keys&quot;,
        &quot;key&quot;: &quot;AAAAB3NzaC1yc2EAAAADAQABAAABAQC/4dvq0KG++Tieu4vhqL4WptgsSUIq+vqLi4PiR6N+UBwEcYWzX33O0gyHsQIJ4dgZRPzTf/kxGPFGtHCrKd0aAUL4uFWFZwuMmJqOvAp+6UDOan/XU9O59Ou0y2vnIxv7+QYb2AHJpHrxjWJ2TjBH7LlTN+jqZBpKUxWQpy4ooyJaN87vpJMbyOEk1LVNpBZHGexF4WRPI6XQUf4PshBRHgqJ9cmiEZUhFWQgeCiyknm8Zx7rGrRhIDnXRw/FOzCyQhnjSS4nJddWzfjNfv9Y0KzRz1KFWUQT9eLaO/j3Q3TleG0zzbZxCBgHv5Jhjm6lmUBcKD0pKU2uhwlD+Ki9&quot;,
        &quot;fingerprint&quot;: &quot;6e:95:48:8d:af:20:75:2a:52:6b:c5:29:d3:71:0a:8b&quot;,
        &quot;type&quot;: &quot;ssh-rsa&quot;,
        &quot;Id&quot;: &quot;github-0&quot;
    },
    &quot;github-1&quot;: {
        &quot;comment&quot;: &quot;github-1&quot;,
        &quot;string&quot;: &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDNTRjYstjHaZyS+vOssLOxYv57z1YEndk5VI34PFb6zb9JI3kTZ0wvhqeO38yAxkjowyrM5MFsMnJnecu9iNKtwb9VPKZRNHLfS3lftELFEEPQC3YaddjX/1ztr4xZqKKvZ6hXH5cRPHKfu5T+r8k2tvtUJlZhz4YeeSah76AL1OxJelHpCrRsiAyywlNLy55kSuG6LNNim6QELDCTRVHeuKMEAuOBL/0nF4NJx2FSYNnyKlSyESwOq5YFDi8tnB9t93zG6Ki0f3j9EtZVXr/4W+Cp9J/I8dX5tV/AJVTeuGrGvOZUjtv1+Na4XfbTOvB4WCJIbczxPlnORt3Qg3R1&quot;,
        &quot;uri&quot;: &quot;https://github.com/TBD.keys&quot;,
        &quot;key&quot;: &quot;AAAAB3NzaC1yc2EAAAADAQABAAABAQDNTRjYstjHaZyS+vOssLOxYv57z1YEndk5VI34PFb6zb9JI3kTZ0wvhqeO38yAxkjowyrM5MFsMnJnecu9iNKtwb9VPKZRNHLfS3lftELFEEPQC3YaddjX/1ztr4xZqKKvZ6hXH5cRPHKfu5T+r8k2tvtUJlZhz4YeeSah76AL1OxJelHpCrRsiAyywlNLy55kSuG6LNNim6QELDCTRVHeuKMEAuOBL/0nF4NJx2FSYNnyKlSyESwOq5YFDi8tnB9t93zG6Ki0f3j9EtZVXr/4W+Cp9J/I8dX5tV/AJVTeuGrGvOZUjtv1+Na4XfbTOvB4WCJIbczxPlnORt3Qg3R1&quot;,
        &quot;fingerprint&quot;: &quot;8a:4f:fe:80:be:e5:ec:c8:c1:1d:e9:74:28:41:c5:a3&quot;,
        &quot;type&quot;: &quot;ssh-rsa&quot;,
        &quot;Id&quot;: &quot;github-1&quot;
    }
}
info. OK.
</pre></div>
</div>
</div>
<div class="section" id="get-keys">
<h3>Get Keys<a class="headerlink" href="#get-keys" title="Permalink to this headline">¶</a></h3>
<p>To get the fingerprint of a key you can obtain it with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key get demokey
   demokey: 4e:fc:e8:03:4e:c7:8e:ca:30:1a:54:43:8d:24:90:39
   info. OK.
</pre></div>
</div>
</div>
<div class="section" id="default-keys">
<h3>Default Keys<a class="headerlink" href="#default-keys" title="Permalink to this headline">¶</a></h3>
<p>In many cases it is convenient to just use a default key that is
set. To mark key as default by name you can use the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key default demokey
Key demokey set as default
info. OK.
</pre></div>
</div>
<p>You can verify that a key is set as default while looking at the
&#8216;is_default&#8217; attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key list --format=json

       &quot;1&quot;: {
           &quot;comment&quot;: &quot;albert@Zweistein&quot;,
           &quot;is_default&quot;: &quot;True&quot;,  &lt;&lt;--Set to True
           &quot;kind&quot;: &quot;key&quot;,
           &quot;name&quot;: &quot;demokey&quot;,
           &quot;created_at&quot;: &quot;2015-09-23 15:58:32&quot;,
           &quot;uri&quot;: &quot;file:///home/key_expt/id_rsa.pub&quot;,
           &quot;value&quot;: null,
           &quot;updated_at&quot;: &quot;2015-09-23 16:14:41&quot;,
           &quot;project&quot;: &quot;undefined&quot;,
           &quot;source&quot;: &quot;ssh&quot;,
           &quot;user&quot;: &quot;undefined&quot;,
           &quot;fingerprint&quot;: &quot;4e:fc:e8:03:4e:c7:8e:ca:30:1a:54:43:8d:24:90:39&quot;,
           &quot;label&quot;: &quot;demokey&quot;,
           &quot;id&quot;: 1,
           &quot;cloud&quot;: &quot;general&quot;
       }
   }
   info. OK.
</pre></div>
</div>
<p>To make it easy for the user, we can set the default key also
interactively with the select option:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key default --select

KEYS
====

    1 - demokey: 4e:fc:e8:03:4e:c7:8e:ca:30:1a:54:43:8d:24:90:39
    2 - rsa: 2d:18:a8:03:1e:e1:7e:fe:b3:fa:59:49:c7:c2:cf:01
    q - quit


Select between 1 - 2: 2
choice 2 selected.
Setting key: rsa as default.
info. OK.
</pre></div>
</div>
</div>
<div class="section" id="delete-keys">
<h3>Delete Keys<a class="headerlink" href="#delete-keys" title="Permalink to this headline">¶</a></h3>
<p>A named key can be deleted from the registry with the command, where
&#8216;demokey&#8217; is the name of the key:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key delete demokey
Key demokey deleted successfully from database.
info. OK.
</pre></div>
</div>
<p>Alternatively you can also interactively select it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key delete --select

KEYS
====

    1 - rsa: 2d:18:a8:03:1e:e1:7e:fe:b3:fa:59:49:c7:c2:cf:01
    2 - demokey: 4e:fc:e8:03:4e:c7:8e:ca:30:1a:54:43:8d:24:90:39
    q - quit


Select between 1 - 2: 2
choice 2 selected.
Deleting key: demokey...
info. OK.
</pre></div>
</div>
<p>To delete all keys from database use:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key delete --all
All keys from the database deleted successfully.
info. OK.
</pre></div>
</div>
</div>
<div class="section" id="adding-key-to-cloud">
<h3>Adding Key to Cloud<a class="headerlink" href="#adding-key-to-cloud" title="Permalink to this headline">¶</a></h3>
<p>This functionality is required for key management with VMs. We can add the key from database to the target cloud.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key add_to_cloud albertkey
Adding key albertkey to cloud kilo as albert-kilo-albertkey
Key albertkey added successfully to cloud kilo as albert-kilo-albertkey.
info. OK.
</pre></div>
</div>
<p>By default the target cloud key name format is &lt;username&gt;-&lt;cloud&gt;-&lt;key-name&gt;.
However, you may choose to override it with &#8216;&#8211;name_on_cloud&#8217; argument.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key add_to_cloud albertkey --name_on_cloud=someothername
key add_to_cloud albertkey --name_on_cloud=someothername
Adding key albertkey to cloud kilo as someothername
Key albertkey added successfully to cloud kilo as someothername.
info. OK.
</pre></div>
</div>
</div>
<div class="section" id="list-key-cloud-mapings">
<h3>List Key Cloud Mapings<a class="headerlink" href="#list-key-cloud-mapings" title="Permalink to this headline">¶</a></h3>
<p>You may check out the mappings of database key names with the cloud key names.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ cm key list_cloud_mappings
+-----------+-----------+------------+-------------------------+
| user      | key_name  | cloud_name | key_name_on_cloud       |
+-----------+-----------+------------+-------------------------+
| albert    | albertkey | kilo       | albert-kilo-albertkey   |
+-----------+-----------+------------+-------------------------+
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="command_list.html" class="btn btn-neutral float-right" title="List Command" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="command_cloud.html" class="btn btn-neutral" title="Cloud Command" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Gregor von Laszewski.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.1.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>