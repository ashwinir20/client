

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; cloudmesh_client 4.2.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="cloudmesh_client 4.2.2 documentation" href="index.html"/>
        <link rel="next" title="Reference Card" href="reference_card.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> cloudmesh_client
          

          
          </a>

          
            
            
              <div class="version">
                4.2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="prefix.html">Prefix</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Short Manuals</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#help">Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defaults-and-variables">Defaults and Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-clouds">Accessing Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-machines">Virtual Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vm-quickstart">VM Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hpc">HPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference_card.html">Reference Card</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Example Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="comet.html">Comet Virtual Cluster</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/man.html">Commands</a></li>
</ul>
<p class="caption"><span class="caption-text">Teaching</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="exercises.html">Exercises</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking.html">Hacking</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<p class="caption"><span class="caption-text">Future and Old</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code/cloudmesh_client.html">cloudmesh_client package</a></li>
</ul>
<p class="caption"><span class="caption-text">Todo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="todo.html">ToDos</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon.html">Using python 2 and 3 for development</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon.html#python-guidelines">Python Guidelines</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">cloudmesh_client</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Quickstart</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/quickstart.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This quickstart quide assumes that you have prepared your
system according to the steps documented in the Section
<a class="reference internal" href="system.html#preparation"><span>Preparation</span></a>. We also strongly recommend you read
the sections <a class="reference internal" href="installation.html#installation"><span>Installation</span></a> and
<a class="reference internal" href="configuration.html#configuration"><span>Configuration</span></a>.</p>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">At this time do not use the pip install as we have not
yet uploaded the newest version to pypi. Instead, plase
use the source install discussed in our manual</p>
</div>
<p>The setup of cloudmesh client is quite simple and can be done with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pip install cloudmesh_client
</pre></div>
</div>
<p>However, you may want to read carefully our setup guide and prepare
your machine as your OS may not have the required packages installed
by default (see: <a class="reference internal" href="system.html#preparation"><span>Preparation</span></a>).</p>
</div>
<div class="section" id="help">
<h2>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h2>
<p>There are many commands in cloudmesh, and you can find
out more about them while typing in</p>
<pre class="highlight"><style type="text/css">
span.prompt1:before {
  content: "cm> ";
}
</style><span class="prompt1">help</span>
</pre><p>When locationg a specific command you want to know more about, lets
assume you want to know more about the command <cite>color</cite>, say</p>
<pre class="highlight"><span class="prompt1">help color</span>
</pre></div>
<div class="section" id="defaults-and-variables">
<h2>Defaults and Variables<a class="headerlink" href="#defaults-and-variables" title="Permalink to this headline">¶</a></h2>
<p>The cloudmesh shell contains a number of useful concepts. This
includes defaults, variables and configuration flags.
While Variables are not saved between different instantiations of
cloudmesh, defaults are saved. Thus the values of defaults can be used
consistently between invocations.</p>
<p>To set a default value, for example to set the default cloud to kilo use:</p>
<pre class="highlight"><span class="prompt1">default cloud=kilo</span>
</pre><p>Some defaults are also set via special commands to make the use more prominent.
To configure color output of the cloudmesh shell use:</p>
<p>For example to set the refresh behavior to update a list command from
a cloud before display you can either use the command:</p>
<pre class="highlight"><span class="prompt1">refresh on</span>
</pre><p>or</p>
<pre class="highlight"><span class="prompt1">default refresh=True</span>
</pre></div>
<div class="section" id="accessing-clouds">
<h2>Accessing Clouds<a class="headerlink" href="#accessing-clouds" title="Permalink to this headline">¶</a></h2>
<p>Naturally, you want to get started with clouds. In case you have a
username and project in futuresystems using cloudmesh is easy. Only
thing you need is an entry in the .ssh/config file with the machine
name india, like follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Host india
Hostname india.futuresystems.org
User albert
</pre></div>
</div>
<p>Next you can register the cloud(s) with:</p>
<pre class="highlight"><span class="prompt1">register remote</span>
</pre><p>This will fetch the necessary credentials from the cloud,
and populate the cloudmesh.yaml file for you. At this time it will
update an entry for a cloud named kilo.</p>
<p>In case you want to add other clouds such as chameleon you can use the
command</p>
<pre class="highlight"><span class="prompt1">register chameleon</span>
</pre><p>This command will than interactively ask you for information about
the cloud credentials and update the yaml file accordingly. To set the
default cloud use the <cite>default</cite> command.</p>
<p>If you need to view the flavors and images in the cloud, use:</p>
<pre class="highlight"><span class="prompt1">image refresh</span>
<span class="prompt1">flavor refresh</span>
</pre><p>The refresh commands are not necessary if you use <cite>refresh
on</cite>. However in this case every time you invoke a list command the
cloud is contacted and the data is updated. IF you do not use refresh,
the data is read from an internal database.</p>
<p>To list the images, flavors, and vms use the following:</p>
<pre class="highlight"><span class="prompt1">image list</span>
<span class="prompt1">flavor list</span>
<span class="prompt1">vm list</span>
</pre><p>To se a selected number of important defaults for the clouds use the
command</p>
<pre class="highlight"><span class="prompt1">cm info</span>
</pre><p>To set default flavor and image use, inspect the results from the list
commands, decide which you want to use, and simply set them for the
current default cloud. Also make sure that the image size is
appropriate. Some images will not fit in a small flavor.
And as always, please assure proper spelling of the image name:</p>
<pre class="highlight"><span class="prompt1">default image=Ubuntu-14.04-64</span>
<span class="prompt1">default flavor=m1.small</span>
</pre><p>When starting vms the vms are added to a default group. The initial
default group name is simply &#8216;default&#8217;. If you like to change it you
can set it with the following command:</p>
<pre class="highlight"><span class="prompt1">default group=experiment_a</span>
</pre><p>Next, you need to upload your ssh keys to the cloud. If you already
have a key-pair you can use it, or else you can generate ssh keys using:</p>
<pre class="highlight"><style type="text/css">
span.prompt2:before {
  content: "$ ";
}
</style><span class="prompt2">ssh-keygen -t rsa -C albert@gmail.com</span>
</pre><p>This will generate a keypair id_rsa.pub (public key) and id_rsa (private key)
in the ~/.ssh/ directory. Next you need to add this key to cloudmesh
with:</p>
<pre class="highlight"><span class="prompt1">key add --ssh</span>
</pre><p>You can list the keys in the key database by using:</p>
<pre class="highlight"><span class="prompt1">key list</span>
</pre><p>The output would look something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>+--------+------------------+-------------------------------------+--------------+--------+
| name   | comment          | uri                                 | fingerprint  | source |
+--------+------------------+-------------------------------------+--------------+--------+
| id_rsa | albert@gmail.com | file:///home/albert/.ssh/id_rsa.pub | 64:aa: ....  | ssh    |
+--------+------------------+-------------------------------------+--------------+--------+
</pre></div>
</div>
<p>Next the key needs to be uploaded to the cloud. Here we take advantage
of the default cloud being automatically used:</p>
<pre class="highlight"><span class="prompt1">key upload</span>
</pre><p>in case you want to upload it to another cloud you can set the default
cloud and repeat this command, or simply specify the cloud as a
parameter:</p>
<pre class="highlight"><span class="prompt1">key upload --cloud=chameleon</span>
</pre></div>
<div class="section" id="virtual-machines">
<h2>Virtual Machines<a class="headerlink" href="#virtual-machines" title="Permalink to this headline">¶</a></h2>
<p>If you have followed this document till this point, you are all set
to start a new VM in the cloud. This section explains how to do that.</p>
<p>First, make sure all defaults are correctly set.</p>
<pre class="highlight"><span class="prompt1">vm default</span>
</pre><p>The output will look somewhat similar to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>+-----------+---------------+
| Attribute | Value         |
+-----------+---------------+
| secgroup  |               |
| name      | albert-001    |
| image     | Ubuntu 14.04  |
| cloud     | kilo          |
| group     | test-group    |
| key       | id_rsa        |
| flavor    | m1.tiny       |
| login_key |               |
+-----------+---------------+
info. OK.
</pre></div>
</div>
<p>Starting a VM now is as simple as executing a single command.</p>
<pre class="highlight"><span class="prompt1">vm boot</span>
</pre><p>This will start up a new VM in your default cloud.
You need to refresh the database before listing VMs.</p>
<pre class="highlight"><span class="prompt1">vm refresh</span>
<span class="prompt1">vm list</span>
</pre><p>The output will look something like follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>+----+--------------+------------+--------+-----------+-------------+----------+---------+--------+-------+
| id | uuid         | label      | status | static_ip | floating_ip | key_name | project | user   | cloud |
+----+--------------+------------+--------+-----------+-------------+----------+---------+--------+-------+
| 47 | 8af4177f-... | albert-001 | ACTIVE | 10.0.2.37 |             | id_rsa   | fg478   | albert | kilo  |
+----+--------------+------------+--------+-----------+-------------+----------+---------+--------+-------+
</pre></div>
</div>
<p>Congratulations! you have now learnt how to set up cloudmesh, and use it to start a VM.
Next step naturally is to login to the virtual machine. To do so, we need to assign it
a public IP (also called floating IP).</p>
<p>To associate a floating ip to an instance (albert-001) in our case, use:</p>
<pre class="highlight"><span class="prompt1">vm ip assign albert-001</span>
</pre><p>Listing VMs will now show you this floating ip:</p>
<pre class="highlight"><span class="prompt1">vm list</span>
</pre><div class="highlight-python"><div class="highlight"><pre><span></span>+----+--------------+------------+--------+-----------+--------------+----------+---------+--------+-------+
| id | uuid         | label      | status | static_ip | floating_ip  | key_name | project | user   | cloud |
+----+--------------+------------+--------+-----------+--------------+----------+---------+--------+-------+
| 47 | 8af4177f-... | albert-001 | ACTIVE | 10.0.2.37 | 152.25.6.101 | id_rsa   | fg478   | albert | kilo  |
+----+--------------+------------+--------+-----------+--------------+----------+---------+--------+-------+
</pre></div>
</div>
<p>Logging into the cloud is now as simple as:</p>
<pre class="highlight"><span class="prompt1">vm login albert-001</span>
</pre><p>This should get you through to the ssh session to the VM.The user name
to be used at login is either automatically detected and added to the
vm information. If you like to change the username for the login you can use the
username parameter</p>
<pre class="highlight"><span class="prompt1">vm login albert-001 --username=ubuntu</span>
</pre><p>To change the default username for a vm you can use the command</p>
<pre class="highlight"><span class="prompt1">vm username ubuntu albert-001</span>
</pre><p>This will set the username for the vm <cite>albert-001</cite> to <cite>ubuntu</cite></p>
<p>To delete a VM, you use the vm name:</p>
<pre class="highlight"><span class="prompt1">vm delete albert-001</span>
</pre></div>
<div class="section" id="vm-quickstart">
<h2>VM Quickstart<a class="headerlink" href="#vm-quickstart" title="Permalink to this headline">¶</a></h2>
<p>To summarize the steps to start a working cloudmesh client and prepare
a simple default while using the <cite>futuresystems.org</cite> cloud use the commands:</p>
<pre class="highlight"><span class="prompt1">cm add key --ssh</span>
<span class="prompt1">cm register remote</span>
<span class="prompt1">cm default cloud=kilo</span>
<span class="prompt1">cm refresh on</span>
<span class="prompt1">cm info</span>
</pre><p>Inspect the info and see if the settings satisfy your needs. Change
them accordingly with the cloudmesh commands.</p>
<p>Now booting and managing a vm is real simple</p>
<pre class="highlight"><span class="prompt1">cm boot</span>
<span class="prompt1">cm ip assign</span>
<span class="prompt1">cm login</span>
</pre><p>And to delete the vm</p>
<pre class="highlight"><span class="prompt1">cm delete --force</span>
</pre></div>
<div class="section" id="hpc">
<h2>HPC<a class="headerlink" href="#hpc" title="Permalink to this headline">¶</a></h2>
<p>In order to use the HPC experiment management functionality, you must
register the queuing system in the yaml file and register the login
node in the .ssh/config file. If you are using india and have used the
clouds before, you may have already done this.</p>
<p>To start a command such as uname and execute a command you can say:</p>
<pre class="highlight"><span class="prompt1">run uname</span>
</pre><p>It will print a job number that you may use to interact with the
system further to for example list the output</p>
<pre class="highlight"><span class="prompt1">run list 101</span>
</pre><p>(We assume here 101 is your job id)</p>
<p>To see the status and the output you can say</p>
<pre class="highlight"><span class="prompt1">run status 101</span>
<span class="prompt1">run output 101</span>
</pre></div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference_card.html" class="btn btn-neutral float-right" title="Reference Card" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Gregor von Laszewski.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.2.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>